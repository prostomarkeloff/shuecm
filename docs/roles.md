# Система ролей и управление ей

### Устройство системы ролей

Система ролей подразумевает иерархию полномочий в беседе. Изначально 
чат-менеджер имеет 4 стандартных роли:

| Название        | Доступные полномочия          | 
| ------------- |:-------------:| 
| Модератор (Moderator)      | Выдача предупреждений |
| Старший модератор (SeniorModerator)      | Выдача предупреждений и исключение из беседы |
| Админ (Admin)     | Выдача предупреждений, исключение, бан |
| Владелец (Owner)      | Выдача предупреждений, исключение, бан |

> Посмотреть на них устройство можно [тут](https://github.com/shueteam/shuecm/blob/master/db/structs/status.py)
 
По умолчанию есть 4 полномочия, которые в разной мере 
доступны каждой роли:

| Полномочие        | Описание            | 
| ------------- |:-------------:| 
| CAN_WRITE      | Возможность писать в чат, выдается по умолчанию всем участникам беседы | 
| CAN_WARN      | Выдача предупреждений, после определённого числа которых пользователь будет исключен      |   
| CAN_KICK| Исключение из беседы     |   
| CAN_BAN| Исключение из беседы без возможности вернуться до получения разбана      |   

### Создание своих ролей

Преимущество данной системы в возможности создания **уникальных ролей**. Например
вам нужна роль, которой будет доступно только кикать, а встроенная роль
```SeniorModerator``` не подходит, ведь она может ещё и выдавать предупреждения.
 Тогда вам нужно создать свою роль младшего модератора.

```python3
from db.models.role import Role
from db.models.chat import Chat
from db.structs.status import Permission

await Role.create_role(
        chat=chat,  # информация о чате, полученная из бд
        name="JuniorModerator",  # название роли
        permissions={Permission.CAN_KICK.value: True},  # возможность кикать
```
Полномочие ```CAN_WRITE``` в словарь permissions указывать необязательно, оно выдается
всем пользователям по умолчанию.